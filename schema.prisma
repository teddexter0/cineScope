// prisma/schema.prisma
model User {
  id         String      @id @default(cuid())
  email      String      @unique
  name       String?
  createdAt  DateTime    @default(now()) @map("created_at")
  updatedAt  DateTime    @updatedAt @map("updated_at")
  watchlist  Watchlist[]
  @@map("users")
}

model Movie {
  id          String      @id @default(cuid())
  tmdbId      Int         @unique @map("tmdb_id")
  title       String
  overview    String?
  posterPath  String?     @map("poster_path")
  releaseDate DateTime?   @map("release_date")
  watchlist   Watchlist[]
  @@map("movies")
}

model Watchlist {
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId    String   @map("user_id")
  movie     Movie    @relation(fields: [movieId], references: [id], onDelete: Cascade)
  movieId   String   @map("movie_id")
  addedAt   DateTime @default(now()) @map("added_at")
  watched   Boolean  @default(false)

  @@id([userId, movieId])
  @@map("watchlist")
}